<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        function heapify (arr, n, i) {
            let left = 2*i + 1
            let right = 2*i + 2
            let max = i
            if (left <= n && arr[left] > arr[max]) {
                max = left
            }
            if (right <= n && arr[right] > arr[max]) {
                max = right
            }

            if (max !== i ){
                [arr[i], arr[max]] = [arr[max], arr[i]]
                heapify(arr, n, max)
            }
        }

        // 建立大顶堆
        function buildHeap (arr) {
            let start = Math.floor((arr.length - 1)/2)
            let len = arr.length
            for (start; start>=0; start--) {
                heapify(arr, len-1, start)
            }
        }

        function heapSort (arr) {
            buildHeap(arr)
            let len = arr.length
            for (let i = (len-1); i>=0; i--) {
                let temp = arr[i]
                arr[i] = arr[0]
                arr[0] = temp
                heapify(arr, i-1, 0)
            }
            return arr
        }

        console.log(heapSort([3,4,6,8,2,46,7,8,9,0,90,23,12]))
    </script>
</body>
</html>